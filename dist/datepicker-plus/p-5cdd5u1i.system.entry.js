System.register(["./p-eb023e44.system.js"],function(e){"use strict";var t,n,r;return{setters:[function(e){t=e.h;n=e.r;r=e.c}],execute:function(){var a=function(e){var t=e.getFullYear();var n=e.getMonth();var r=n+1;var a=e.getDate();return t+"-"+r+"-"+a};var i=function(e){return e.split("-").map(function(e){return parseInt(e)})};var s=function(e){var t=i(e),n=t[0],r=t[1],a=t[2];var s=new Date;s.setFullYear(n);s.setMonth(r-1);s.setDate(a);return s};var o=function(e){var t=typeof e==="string";var n=t?s(e):new Date(e);n.setDate(n.getDate()+1);return t?a(n):n};var u=function(e,t){var n=d(t),r=n[0],a=n[1];var i=new Date(e);var s=f(i,new Date(r));var o=f(i,new Date(a));return s>=0&&o<=0};var c=function(){var e=new Date;var t=new Date(e.getFullYear(),e.getMonth(),1);var n=new Date(e.getFullYear(),e.getMonth()+1,0);return[a(t),a(n)]};var l=function(e,t){if(e===t)return[];var n=d([e,t]),r=n[0],a=n[1];var i=[];var s=o(r);while(s!==a){if(i.length>3e3)b({title:"Memory leak @ getDatesBetween",label:"bug",body:JSON.stringify({dateString0:e,dateString1:t},null,2)});i.push(s);s=o(s)}return[r].concat(i,[a])};var d=function(e){var t=e[0],n=e[1];var r=s(t);var a=s(n);return r.valueOf()-a.valueOf()>0?[n,t]:[t,n]};var f=function(e,t){return Math.ceil((e.getTime()-t.getTime())/864e5)};var h=function(e,t){if(e===void 0){e=[]}return t.map(function(t,n){return e[n]||t})};var v=function(e){var t=Object.create({sorted:{years:[],months:{}},toArray:function(){var e=this;var t=[];this.sorted.years.forEach(function(n){var r=Object.values(e[n]);if(r.length)t=t.concat(r)});return t}});e.forEach(function(e){var n=i(e),r=n[0],a=n[1];if(t.hasOwnProperty(r)===false){t[r]={};t.sorted.years.push(r)}if(t[r].hasOwnProperty(a)===false){t[r][a]=[];if(t.sorted.months.hasOwnProperty(r)){t.sorted.months[r].push(a)}else{t.sorted.months[r]=[a]}}t[r][a].push(e)});t.sorted.years=t.sorted.years.sort(function(e,t){return e-t});for(var n in t.sorted.months){t.sorted.months[n]=t.sorted.months[n].sort(function(e,t){return e-t})}return t};var p=function(e){var t=[];var n=[];e.forEach(function(e){if(e.dayOfWeek===6){t.push(e);n.push(t);t=[]}else{t.push(e)}});if(t.length){n.push(t)}return n};var g=function(e,t){var n=new Date(e);var r=n.getDate();n.setDate(r-t);var i=new Date(e);var s=i.getDate();i.setDate(s+t);return[n,i].map(function(e){return a(e)})};var m=function(e){var t=Object.keys(e.tags);var n=[k.day,e.checked?k.selected:null,e.disabled?k.disabled:null].concat(t.filter(function(t){return e.tags[t]===true}));return n.filter(function(e){return e}).join(" ")};var b=function(e){var t=e.title,n=e.body,r=e.label;var a="title="+encodeURIComponent(t);var i="labels="+encodeURIComponent(r);var s="body="+encodeURIComponent(n);throw"Stopped to prevent memory leak.\n\nüêû Create a new issue:\n"+("https://github.com/solomancode/datepicker-plus/issues/new?"+i+"&"+a+"&"+s)};var y=[{name:"Sunday",abbr:"Sun",isWeekend:true},{name:"Monday",abbr:"Mon "},{name:"Tuesday",abbr:"Tue"},{name:"Wednesday",abbr:"Wed"},{name:"Thursday",abbr:"Thu"},{name:"Friday",abbr:"Fri"},{name:"Saturday",abbr:"Sat",isWeekend:true}];var w=[{name:"January",abbr:"Jan"},{name:"February",abbr:"Feb"},{name:"March",abbr:"Mar"},{name:"April",abbr:"Apr"},{name:"May",abbr:"May"},{name:"June",abbr:"Jun"},{name:"July",abbr:"Jul"},{name:"August",abbr:"Aug"},{name:"September",abbr:"Sep"},{name:"October",abbr:"Oct"},{name:"November",abbr:"Nov"},{name:"December",abbr:"Dec"}];var k={day:"day",year:"year",disabled:"disabled",selected:"selected",month:"month",months:"months",monthName:"month-name",monthHeader:"month-header",monthContent:"month-content",week:"week",empty:"empty",weekHeader:"week-header",weekContent:"week-content",weekend:"weekend",checkbox:"checkbox",singleHeader:"single-header",highlight:"highlight"};var D={selectMode:"range",selected:[],disabled:[],selectScopeSize:0,weekHeader:"per-month",viewRange:c(),i18n:{months:w,weekDays:y},layout:"vertical"};function S(e,t){var n;var r=new Date(t).getDay();var a=i(t),s=a[0],o=a[1],u=a[2];var c=Object.create({tags:{},checked:false,disabled:false,year:s,month:o,day:u,dateString:t,dayOfWeek:r});if(t in e)return e;return Object.assign({},e,(n={},n[t]=c,n))}var E=function(e){return f(new Date(e),new Date)};var C=function(e){return E(e.dateString)===0};var O=function(e){return E(e.dateString)===1};var M=function(e){return E(e.dateString)===-1};var x=function(e){return E(e.dateString)<0};var T=function(e){return E(e.dateString)>0};var I=function(e){var t=e.rangeIndex===0;return t};var H=function(e){var t=e.rangeIndex,n=e.rangeEndIndex;return n>0&&t===n};var L=function(e){var t=e.rangeIndex>0&&e.rangeEndIndex!==e.rangeIndex;return t};var W={today:C,rangeStart:I,rangeEnd:H,connector:L,tomorrow:O,yesterday:M,past:x,future:T};function j(e){var n=this;var r=function(t){return t.target.checked?n.select(e.dateString):n.deselect(e.dateString)};var a=function(){n.updateTags(W,n.viewElements);return m(e)};return t("time",{part:"day",class:a(),dateTime:e.dateString},t("label",null,e.day,t("input",{checked:e.checked,disabled:e.disabled,onChange:r.bind(this),class:k.checkbox,type:"checkbox",value:e.dateString})))}function R(e){return t("header",{class:k.weekHeader,part:"week-header"},e.map(function(e){var n=e.name,r=e.abbr,a=e.isWeekend;return t("abbr",{class:a&&k.weekend,title:n},r)}))}function F(e){var n=[];while(e){n.push(t("span",{class:k.empty}));e--}return n}function A(e,n,r){return t("section",{part:"week",class:k.week},n&&R(r),t("section",{class:k.weekContent},F(e[0].dayOfWeek),e.map(j.bind(this)),F(6-e[e.length-1].dayOfWeek)))}function J(e,n){return t("header",{class:k.monthHeader,part:"month-header"},t("span",{class:k.monthName},n[e.month-1].name),e.month-1===0&&t("span",{class:k.year},e.year))}function P(e,n){var r=this;var a=n.layout==="horizontal"?{width:window.innerWidth-60+"px"}:{};var i=function(e){return n.weekHeader==="per-month"&&e===0};return t("section",{style:a,part:"month",class:k.month},J(e[0],n.i18n.months),t("section",{class:k.monthContent},p(e).map(function(e,t){return A.call(r,e,i(t),n.i18n.weekDays)})))}function U(e,n){var r=this;var a=n.layout==="horizontal"?{width:window.innerWidth*e.length+"px"}:{};var i=function(){return n.weekHeader==="single"&&t("header",{class:k.singleHeader},R(n.i18n.weekDays))};return[n.stylesheetUrl?t("link",{rel:"stylesheet",type:"text/css",href:n.stylesheetUrl}):null,t("section",{class:(n.stylesheetUrl?"":"dpp ")+n.layout,part:"dpp-container"},t("section",{style:a,class:"viewport"},[i()||null,e.map(function(e){return P.call(r,e,n)})]))]}var V=function(){function e(e){var t=this;n(this,e);this.plusConfig=D;this.registered={};this.viewElements=[];this.selected=[];this.disabled=[];this.viewList=[];this.activeScope=null;this.unfoldDisabledList=function(e){if(!e.length)return[];return e.map(function(e){return t.unfoldTag(e,W)}).reduce(function(e,t){return e.concat(t)})};this.patchConfigLists=function(){var e=D.i18n,n=e.months,r=e.weekDays;var a=t.plusConfig.i18n,i=a.months,s=a.weekDays;t.plusConfig.i18n.months=h(i,n);t.plusConfig.i18n.weekDays=h(s,r)};this.select=function(e){var n=t.plusConfig.selectMode;var r=[];if(n==="single"){r=[e]}else if(n==="multiple"){r=t.selected.concat([e])}else if(n==="range"){if(t.selected.includes(e)){r=[]}else if(t.selected.length===1){r=l(t.selected[0],e)}else{r=[e]}}var a=t.checkIfHasDisabled(r,t.disabled);if(a)return t.viewElements;var i=t.plusConfig.selectScopeSize;if(n==="range"&&i>0){if(!t.activeScope){t.activeScope=t.generateScope(t.viewElements,t.disabled);t.activeScope.activate(e,i)}else{t.activeScope.deactivate()}}var s=t.selectMultipleDates(r,t.viewElements);t.viewElements=t.updateTags(W,s);t.selected=r;t.onDateSelect.emit(t.selected);if(n==="range"&&t.selected.length>1)t.onRangeSelect.emit(t.selected)};this.deselect=function(e){var n=t.plusConfig.selectMode;var r=[];if(n==="multiple"){r=t.selected.filter(function(t){return t!==e})}if(n==="range"){if(t.activeScope)t.activeScope.deactivate()}var a=t.selectMultipleDates(r,t.viewElements);t.viewElements=t.updateTags(W,a);t.selected=r};this.unfoldTag=function(e,n){if(!(e in n))return[e];if(t.viewElements.length!==0){return t.viewElements.map(function(t){return t.filter(function(t){return t.tags[e]===true})}).reduce(function(e,t){return e.concat(t)}).map(function(e){return e.dateString})}else{return[]}};this.onDateSelect=r(this,"onDateSelect",7);this.onDateDeselect=r(this,"onDateDeselect",7);this.onRangeSelect=r(this,"onRangeSelect",7)}e.prototype.updateViewElements=function(e){var t=this;this.registerViewDates(e);this.viewElements=e.map(function(e){return e.map(function(e){return t.registered[e]})})};e.prototype.componentWillLoad=function(){this.plusConfig=Object.assign({},D,this.plusConfig);this.patchConfigLists();this.viewList=this.createViewList(this.plusConfig.viewRange);this.updateTags(W,this.viewElements);this.plusConfig.disabled=this.unfoldDisabledList(this.plusConfig.disabled);this.disableMultipleDates(this.plusConfig.disabled,this.viewElements);this.plusConfig.selected.forEach(this.select);if(this.plusConfig.layout==="horizontal"){this.plusConfig.weekHeader="per-month"}};e.prototype.createViewList=function(e){var t=e[0],n=e[1];var r=l(t,n);return v(r).toArray()};e.prototype.registerViewDates=function(e){var t=this;return e.forEach(function(e){return e.forEach(function(e){var n=S(t.registered,e);t.registered=n})})};e.prototype.generateScope=function(e,t){var n=this;var r=[];return{activate:function(t,a){var i=g(t,a);return e.map(function(e){return e.map(function(e){var t=u(e.dateString,i);if(t){e.disabled=false}else{e.disabled=true;n.disabled.push(e.dateString)}n.disabled=r;return e})})},deactivate:function(){var e=n.disableMultipleDates(t,n.viewElements);n.activeScope=null;return e}}};e.prototype.checkIfHasDisabled=function(e,t){var n={};t.forEach(function(e){return n[e]=true});return e.some(function(e){return e in n})};e.prototype.selectMultipleDates=function(e,t){return t.map(function(t){return t.map(function(t){t.checked=e.includes(t.dateString);if(e.length>1){t.rangeIndex=t.checked?e.indexOf(t.dateString):null;t.rangeEndIndex=t.checked?e.length-1:null}return t})})};e.prototype.disableMultipleDates=function(e,t){var n=[];var r=t.map(function(t){return t.map(function(t){var r=e.includes(t.dateString);t.disabled=r;if(r)n.push(t.dateString);return t})});this.disabled=n;return r};e.prototype.updateTags=function(e,t){if(t){return t.map(function(t){return t.map(function(t){for(var n in e){t.tags[n]=e[n](t)}return t})})}};e.prototype.render=function(){return U.call(this,this.viewElements,this.plusConfig)};Object.defineProperty(e,"watchers",{get:function(){return{viewList:["updateViewElements"]}},enumerable:true,configurable:true});Object.defineProperty(e,"style",{get:function(){return".dpp{font-family:monospace}.horizontal{overflow-x:scroll}.horizontal .month{display:inline-block}.month{border:1px solid #ccc;padding:20px}.dpp .month-header{text-transform:uppercase;font-weight:700;margin-bottom:5px}.dpp .day.selected.rangeStart{background-color:#cddc39}.dpp .day.selected.rangeEnd{background-color:#ff9800}.week-header{display:-ms-flexbox;display:flex}.single-header{padding:5px 20px}.week-header abbr{-ms-flex-positive:1;flex-grow:1;text-align:center}.week-content{display:-ms-flexbox;display:flex}.week-content>.day,.week-content>.empty{-ms-flex-positive:1;flex-grow:1;-ms-flex-preferred-size:80px;flex-basis:80px;text-align:center}.day{position:relative;line-height:30px}.day>label{display:block;width:100%;height:100%;cursor:pointer;-webkit-box-sizing:border-box;box-sizing:border-box}.day.disabled{color:#ccc;background-color:#f8f8f8}.dpp .day.selected{background-color:gold}.dpp .day.highlight{background-color:#7e5}.dpp .day.today{outline:1px solid #ccc}.checkbox{display:none}.month-header{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}"},enumerable:true,configurable:true});return e}();e("datepicker_plus",V)}}});